<!DOCTYPE html>
<html>
<head>
  <title>CrankTheCode</title>
  <link rel="stylesheet" href="/static/styles.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="CrankTheCode RSS" href="/rss.xml">
  <script type="text/javascript">
    // Slightly annoying but effective
    const user = "oernster";
    const domain = "codecrafter.uk";
    const link = `mailto:${user}@${domain}`;
    document.write(`<a href="${link}">${user}@${domain}</a>`);
  </script>
  <noscript>[Enable JavaScript to see my email address]</noscript>
</head>
<body>
  <a class="top-about-link" href="/about">About Me</a>
  <header class="site-header">
    <div class="header-spacer" aria-hidden="true"></div>
    <h1 class="site-title">Crank The Code</h1>
    <div class="header-actions">
      <button
        class="icon-btn search-toggle"
        type="button"
        aria-label="Search"
        aria-expanded="false"
        aria-controls="search-panel"
      >
        üîç
      </button>
      <a class="rss-link" href="/rss.xml" aria-label="RSS feed">
        <img class="rss-icon" src="/static/rss.svg" alt="" />
      </a>
    </div>
  </header>
  <div id="search-panel" class="search-panel" hidden>
    <label class="visually-hidden" for="site-search">Search posts</label>
    <div class="search-input-wrap">
      <input
        id="site-search"
        class="search-input"
        type="search"
        placeholder="Search posts‚Ä¶"
        autocomplete="off"
      />
      <button
        class="search-close"
        type="button"
        aria-label="Close search"
        title="Close search"
      >
        ‚úï
      </button>
    </div>
  </div>
  <div>
    {% for post in posts %}
      <div class="post-item" data-search="{{ (post.title ~ ' ' ~ (post.tags | join(' '))) | lower }}">
        <div class="post-heading">
          <a class="btn-link" href="/posts/{{ post.slug }}">{{ post.title }}</a>
          <small>{{ post.date }} ‚Äî Tags:
            {% for tag in post.tags %}
              <span class="tag">{{ tag }}</span>
            {% endfor %}
          </small>
        </div>
        {% if post.cover_image_url %}
          <a class="post-cover-link" href="/posts/{{ post.slug }}" aria-label="Open {{ post.title }}">
            <img class="post-cover" src="{{ post.cover_image_url }}" alt="" loading="lazy" />
          </a>
        {% endif %}
        <div class="post-summary">{{ post.summary_html | safe }}</div>
      </div>
      {% if not loop.last %}
        <hr class="post-separator" />
      {% endif %}
    {% endfor %}
    </div>
  <script src="/static/search.js" defer></script>
</body>
</html>
