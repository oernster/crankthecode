{% extends "base.html" %}

{% block title %}Crank The Code - Python Engineering Blog by Oliver Ernster{% endblock %}

{% block content %}
  <section class="landing-intro" aria-label="Intro">
    <div class="section-panel section-panel--intro">
      <div class="hero">
        <div class="hero__avatar">
          <img
            class="hero__avatar-img"
            src="/static/images/me-hero.jpg"
            alt="Portrait of the site author"
            width="120"
            height="120"
            loading="eager"
            decoding="async"
          />
        </div>
        <div class="hero__copy">
          <h1 class="hero__headline">
            I build clean, efficient software that solves problems no one asked about - but secretly needed solved.
          </h1>
          <p class="hero__tagline">
            <i>Come for the clean code. Stay because your manager told you to.</i>
          </p>
          <p class="hero__subline">
            I build projects that usually start with ‚ÄòWouldn‚Äôt it be ridiculous if‚Ä¶‚Äô and end with something shippable and somehow useful.
          </p>
          <p class="hero__subline">
            Helping engineers go from StackOverflow panic to system-level confidence.
          </p>
          <p class="hero-subline">
            Full-stack developer with 28 years of experience building scalable systems, rapid prototypes and custom APIs using Python, C++ and a few absurd ideas that actually shipped.
          </p>
          <div class="hero-actions" aria-label="Primary actions">
            <a href="#contact" class="cta-button">üì© Hire Me</a>
            <a class="cta-button" href="/docs/CV-Oliver.pdf" download>üìÑ Download my CV</a>
          </div>
        </div>
      </div>

      <hr class="post-separator post-separator--subtle" aria-hidden="true" />

      <h2 class="section-title section-title--accent">Things I build with</h2>
      <div class="build-with" aria-label="Things I build with">
        <div class="build-with-col">
          <h3 class="build-with-title">Backend</h3>
          <p class="build-with-items">Python, FastAPI, Django, Flask</p>
        </div>
        <div class="build-with-col">
          <h3 class="build-with-title">Frontend</h3>
          <p class="build-with-items">React, Typescript, HTML/CSS</p>
        </div>
        <div class="build-with-col">
          <h3 class="build-with-title">Tools</h3>
          <p class="build-with-items">Docker, Ansible, Terraform, Git</p>
        </div>
        <div class="build-with-col">
          <h3 class="build-with-title">Operating systems</h3>
          <p class="build-with-items">Linux, macOS, Windows</p>
        </div>
        <div class="build-with-col">
          <h3 class="build-with-title">Hardware</h3>
          <p class="build-with-items">Klipper, MicroPython, Voron / other 3D printers</p>
        </div>
      </div>
    </div>
  </section>

  <section class="featured-projects" aria-label="Projects">
    <section class="section-panel section-panel--featured" aria-labelledby="featured-projects-heading">
        <h2 id="featured-projects-heading" class="section-title section-title--accent">Featured Projects</h2>
        <div class="featured-buttons" aria-label="Featured project links">
          {% for p in homepage_projects.featured %}
            <a
              class="btn-link btn-link--with-thumb{% if loop.first %} btn-link--primary featured-primary{% endif %}"
              href="/posts/{{ p.slug }}"
            >
              {% set cover = homepage_thumb_index.get(p.slug) or homepage_cover_index.get(p.slug) %}
              {% set blurb = homepage_blurb_index.get(p.slug) %}
              {% set emoji = homepage_emoji_index.get(p.slug) or p.emoji %}
              {% if (emoji or '')|length > 0 %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">{{ emoji }}</span>
              {% elif p.slug == 'calendifier' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üìÖ</span>
              {% elif p.slug == 'elevator' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üõó</span>
              {% elif p.slug == 'audiodeck' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üîä</span>
              {% elif p.slug == 'galacticunicorn' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">ü¶Ñ</span>
              {% elif p.slug == '3D-printer-launcher' %}
                <img class="btn-thumb" src="/static/images/3dprinterlauncher-icon.png" alt="{{ p.label }}" loading="lazy" />
              {% elif p.slug == 'fancy-clock' %}
                <img class="btn-thumb" src="/static/images/fancyclock-icon.png" alt="{{ p.label }}" loading="lazy" />
              {% elif cover %}
                <img class="btn-thumb" src="{{ cover }}" alt="{{ p.label }}" loading="lazy" />
              {% endif %}
            <span class="btn-text">
              {{ p.label }}
              {% if blurb %}
                <span class="btn-subtext">{{ blurb }}</span>
              {% endif %}
            </span>
          </a>
        {% endfor %}
      </div>
    </section>

    <hr class="post-separator" aria-hidden="true" />

    <section class="section-panel section-panel--backlog" aria-labelledby="backlog-heading">
      <h2 id="backlog-heading" class="section-title section-title--accent">Backlog of Brilliance!</h2>
      <div class="featured-buttons" aria-label="Backlog project links">
        {% for p in homepage_projects.backlog %}
          <a class="btn-link btn-link--with-thumb" href="/posts/{{ p.slug }}">
            {% set cover = homepage_thumb_index.get(p.slug) or homepage_cover_index.get(p.slug) %}
            {% set blurb = homepage_blurb_index.get(p.slug) %}
            {% set emoji = homepage_emoji_index.get(p.slug) or p.emoji %}
            {% if (p.emoji or '')|length > 0 %}
              <span
                class="btn-thumb btn-thumb--emoji{% if p.slug in ['bots', 'hardware-guides-are-accidental-bios'] %} btn-thumb--emoji-multi{% endif %}"
                aria-hidden="true"
              >
                {{ p.emoji }}
              </span>
              {% elif (emoji or '')|length > 0 %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">{{ emoji }}</span>
              {% elif p.slug == 'calendifier' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üìÖ</span>
              {% elif p.slug == 'elevator' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üõó</span>
              {% elif p.slug == 'audiodeck' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üîä</span>
            {% elif p.slug == 'galacticunicorn' %}
              <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">ü¶Ñ</span>
            {% elif p.slug == '3D-printer-launcher' %}
              <img class="btn-thumb" src="/static/images/3dprinterlauncher-icon.png" alt="{{ p.label }}" loading="lazy" />
            {% elif p.slug == 'fancy-clock' %}
              <img class="btn-thumb" src="/static/images/fancyclock-icon.png" alt="{{ p.label }}" loading="lazy" />
            {% elif cover %}
              <img class="btn-thumb" src="{{ cover }}" alt="{{ p.label }}" loading="lazy" />
            {% endif %}
            <span class="btn-text">
              {{ p.label }}
              {% if blurb %}
                <span class="btn-subtext">{{ blurb }}</span>
              {% endif %}
            </span>
          </a>
        {% endfor %}

        <a class="btn-link btn-link--all" href="/posts" aria-label="All posts">All</a>
      </div>
    </section>

    <hr class="post-separator" aria-hidden="true" />

    <section class="section-panel section-panel--backlog" aria-labelledby="tooling-heading">
      <h2 id="tooling-heading" class="section-title section-title--accent">Tooling</h2>
      <div class="featured-buttons" aria-label="Tooling links">
        {% for p in homepage_projects.tooling %}
          <a class="btn-link btn-link--with-thumb" href="/posts/{{ p.slug }}">
            {% set cover = homepage_thumb_index.get(p.slug) or homepage_cover_index.get(p.slug) %}
            {% set blurb = homepage_blurb_index.get(p.slug) %}
            {% set emoji = homepage_emoji_index.get(p.slug) or p.emoji %}
            {% if (p.emoji or '')|length > 0 %}
              <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">{{ p.emoji }}</span>
              {% elif (emoji or '')|length > 0 %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">{{ emoji }}</span>
              {% elif p.slug == 'calendifier' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üìÖ</span>
              {% elif p.slug == 'elevator' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üõó</span>
              {% elif p.slug == 'audiodeck' %}
                <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üîä</span>
            {% elif p.slug == 'galacticunicorn' %}
              <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">ü¶Ñ</span>
            {% elif p.slug == '3D-printer-launcher' %}
              <img class="btn-thumb" src="/static/images/3dprinterlauncher-icon.png" alt="{{ p.label }}" loading="lazy" />
            {% elif p.slug == 'fancy-clock' %}
              <img class="btn-thumb" src="/static/images/fancyclock-icon.png" alt="{{ p.label }}" loading="lazy" />
            {% elif cover %}
              <img class="btn-thumb" src="{{ cover }}" alt="{{ p.label }}" loading="lazy" />
            {% endif %}
            <span class="btn-text">
              {{ p.label }}
              {% if blurb %}
                <span class="btn-subtext">{{ blurb }}</span>
              {% endif %}
            </span>
          </a>
        {% endfor %}
      </div>
    </section>

    <hr class="post-separator" aria-hidden="true" />

    <section class="section-panel section-panel--launch" aria-labelledby="archive-heading">
      <h2 id="archive-heading" class="section-title section-title--accent">Crank Change Archive</h2>
      <div class="featured-buttons" aria-label="Crank Change archive posts">
        {#
          Archive entries are computed server-side and passed in as
          `crank_change_archive_posts`, sorted newest-first.
        #}
        {% for p in crank_change_archive_posts or [] %}
          <a class="btn-link btn-link--with-thumb" href="/posts/{{ p.slug }}">
            {% set cover = homepage_cover_index.get(p.slug) %}
            {% if cover %}
              <img class="btn-thumb" src="{{ cover }}" alt="{{ p.title }}" loading="lazy" />
            {% elif (p.emoji or '')|length > 0 %}
              <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">{{ p.emoji }}</span>
            {% else %}
              <span class="btn-thumb btn-thumb--emoji" aria-hidden="true">üìù</span>
            {% endif %}
            <span class="btn-text">{{ p.title_text or p.title }}</span>
          </a>
        {% endfor %}
      </div>

      {# CTA moved to the global header (below ‚ÄúCrank The Code‚Äù) in base.html #}
    </section>
  </section>

  <section class="landing-outro" aria-label="Outro">
    <div class="section-panel section-panel--intro">
      <p>
        If you‚Äôre here to hire me, collaborate, or just gawk at the DIY chaos - welcome.
        I build functional, overengineered nonsense with just enough polish to pass as professional.
      </p>

      <section id="contact" aria-label="Contact">
        <p>Want to talk?</p>
        <p>
          If you want to work together, debate API design, or swap horror stories about legacy code,
          feel free to get in touch:
          <span class="landing-outro__email">
            <script type="text/javascript">
              // Keep the email address out of the static HTML to reduce bot scraping.
              (function () {
                const c = window.CTC_CONTACT;
                if (!c) {
                  return;
                }
                document.currentScript.insertAdjacentHTML(
                  "beforebegin",
                  `<a href="${c.link}">${c.address}</a>`
                );
              })();
            </script>
            <noscript>Enable JavaScript to reveal the email address.</noscript>
          </span>
        </p>
      </section>
    </div>
  </section>
{% endblock %}
