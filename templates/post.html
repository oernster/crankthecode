{% extends "base.html" %}

{% block title %}{{ post.title }} | CrankTheCode{% endblock %}

{% block content %}
  <div class="post-heading">
    <h1>{{ post.title }}</h1>
    <p><small>{{ post.date }} ~ Tags: {{ post.tags | join(", ") }}</small></p>
    {% if post.one_liner or post.blurb %}
      <p class="post-one-liner">{{ post.one_liner or post.blurb }}</p>
    {% endif %}
  </div>

  {# Per-post flourish: AxisDB install prompt above the cover image #}
  {% if post.slug == 'axisdb' %}
    <div class="fake-terminal fake-terminal--axisdb-install" aria-label="Install AxisDB">
      <div class="fake-terminal__title">
        <span>bash</span>
        <button
          class="code-copy code-copy--icon"
          type="button"
          data-copy-target="axisdb-install-commands"
          aria-label="Copy install commands"
          title="Copy install commands"
        >
          <svg class="code-copy__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path
              d="M16 1H6a2 2 0 0 0-2 2v12h2V3h10V1Zm3 4H10a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm0 16H10V7h9v14Z"
            />
          </svg>
        </button>
      </div>
      <pre class="fake-terminal__body"><code><span class="ft-step ft-step--1"><span class="fake-terminal__prompt">user@linux:~$ </span><span class="fake-terminal__typed fake-terminal__typed--1">python3 -m venv venv</span><span class="fake-terminal__cursor-wrap fake-terminal__cursor-wrap--1" aria-hidden="true"><span class="fake-terminal__cursor"></span></span></span>
<span class="ft-step ft-step--2"><span class="fake-terminal__prompt">user@linux:~$ </span><span class="fake-terminal__typed fake-terminal__typed--2">source venv/bin/activate</span><span class="fake-terminal__cursor-wrap fake-terminal__cursor-wrap--2" aria-hidden="true"><span class="fake-terminal__cursor"></span></span></span>
<span class="ft-step ft-step--3"><span class="fake-terminal__prompt">user@linux:~$ </span><span class="fake-terminal__typed fake-terminal__typed--3">pip install --upgrade pip</span><span class="fake-terminal__cursor-wrap fake-terminal__cursor-wrap--3" aria-hidden="true"><span class="fake-terminal__cursor"></span></span></span>
<span class="ft-step ft-step--4"><span class="fake-terminal__prompt">user@linux:~$ </span><span class="fake-terminal__typed fake-terminal__typed--4">pip install axisdb</span><span class="fake-terminal__cursor-wrap fake-terminal__cursor-wrap--4" aria-hidden="true"><span class="fake-terminal__cursor"></span></span></span></code></pre>

      <pre class="visually-hidden"><code id="axisdb-install-commands">python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install axisdb</code></pre>
    </div>
  {% endif %}

  {% if post.cover_image_url %}
    <img class="post-cover" src="{{ post.cover_image_url }}" alt="{{ post.title }}" />
  {% endif %}
  {% if post.extra_image_urls %}
    <div class="post-extra-images" aria-label="Additional images">
      {% for url in post.extra_image_urls %}
        <img class="post-extra-image" src="{{ url }}" alt="{{ post.title }}" loading="lazy" />
      {% endfor %}
    </div>
  {% endif %}
  <div class="post-content{% if post.slug == 'hello-crank' %} post-content--centered{% endif %}">
    {{ post.content | safe }}
  </div>
{% endblock %}
