{% extends "base.html" %}

{% block title %}{{ post.title }} | Crank The Code{% endblock %}

{% block content %}
  <div class="post-heading">
    <h1>
      {% if (post.emoji or '')|length > 0 %}
        <span class="post-title-emoji" aria-hidden="true">{{ post.emoji }}</span>
      {% endif %}
      {{ post.title_text or post.title }}
    </h1>
    <div class="post-meta">
      <small class="post-date">{{ post.date }}</small>
      <small class="post-tags">Tags: {{ post.tags | join(", ") }}</small>
    </div>
    {% if post.one_liner or post.blurb %}
      <p class="post-one-liner">{{ post.one_liner or post.blurb }}</p>
    {% endif %}
  </div>

  {% if post.cover_image_url %}
    <a class="post-cover-link" href="{{ post.cover_image_url }}" aria-label="Open full-size image: {{ post.title }}">
      <img class="post-cover" src="{{ post.cover_image_url }}" alt="{{ post.title }}" loading="eager" />
    </a>
  {% endif %}

  {# Per-post flourish: AxisDB install prompt above the cover image #}
  {# NOTE: AxisDB install prompt is injected server-side immediately after the
     Problem -> Solution -> Impact section (see get_post use-case). #}

  <div class="post-content{% if post.slug == 'hello-crank' %} post-content--centered{% endif %}">
    {{ post.content | safe }}
  </div>
{% endblock %}
