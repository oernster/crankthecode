<!DOCTYPE html>
<html>
<head>
  <title>{% block title %}CrankTheCode{% endblock %}</title>
  <link rel="stylesheet" href="/static/styles.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="CrankTheCode RSS" href="/rss.xml">
  <script type="text/javascript">
    // Slightly annoying but effective
    const user = "oernster";
    const domain = "codecrafter.uk";
    const link = `mailto:${user}@${domain}`;
    document.write(`<a href="${link}">${user}@${domain}</a>`);
  </script>
  <noscript>Email visible with JavaScript enabled ‚Äî or reach me via GitHub.</noscript>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <div class="top-links" aria-label="Top links">
    <a class="top-about-link" href="/about">About Me</a>
    <a class="top-favicon-link" href="/" aria-label="Home">
      <img class="top-favicon-icon" src="/favicon.ico" alt="" aria-hidden="true" />
    </a>
  </div>

  <header class="site-header">
    {% if back_link_href %}
      <a class="back-link" href="{{ back_link_href }}">{{ back_link_label or "‚Üê Back" }}</a>
    {% else %}
      <div class="header-spacer" aria-hidden="true"></div>
    {% endif %}

    <a class="site-title-link" href="/" aria-label="Homepage">
      {% if is_homepage %}
        <h1 class="site-title">Crank The Code</h1>
      {% else %}
        <span class="site-title">Crank The Code</span>
      {% endif %}
    </a>

    <div class="header-actions">
      <button
        class="icon-btn search-toggle"
        type="button"
        aria-label="Search"
        aria-expanded="false"
        aria-controls="search-panel"
      >
        üîç
      </button>
      <a class="rss-link" href="/rss.xml" aria-label="RSS feed">
        <img class="rss-icon" src="/static/rss.svg" alt="" />
      </a>
    </div>
  </header>

  <div id="search-panel" class="search-panel" hidden>
    <label class="visually-hidden" for="site-search">Search posts</label>
    <form class="search-form" role="search" action="/posts" method="get">
      <div class="search-input-wrap">
        <input
          id="site-search"
          class="search-input"
          name="q"
          type="search"
          placeholder="Search posts‚Ä¶"
          autocomplete="on"
          required
        />
        <div id="search-suggestions" class="search-suggestions" hidden></div>
        <button
          class="search-close"
          type="button"
          aria-label="Close search"
          title="Close search"
        >
          ‚úï
        </button>
      </div>
      <button class="search-go" type="submit" aria-label="Search">Go</button>
    </form>
  </div>

  <div class="page-layout">
    <nav class="sidebar" aria-label="Categories">
      <h2 class="sidebar-title">Categories</h2>
      <a
        class="sidebar-link{% if request.url.path == '/posts' and (current_q or '')|length == 0 %} is-active{% endif %}"
        href="/posts"
      >
        All Posts
      </a>
      {% for cat in sidebar_categories or [] %}
        <a
          class="sidebar-link{% if (current_q or '')|lower == (cat.query or '')|lower %} is-active{% endif %}"
          href="{{ cat.href }}"
        >
          {{ cat.label }}
        </a>
      {% endfor %}
    </nav>

    <main id="main" class="page-main">
      {% block content %}{% endblock %}
    </main>
  </div>

  <script src="/static/search.js" defer></script>
</body>
</html>

